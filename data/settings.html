<HTML>
<HEAD><TITLE>Scaldasonno</TITLE></HEAD>
<BODY>
<CENTER>
<B>Programmazione settimanale</B>
<br>
<br>
<table style="width:50%">
	<tr>
		<td colspan="4"><center>Thom</center></button></td>
		<td colspan="1" style="font-size: 4em; font-weight: bold" valign="bottom">&nbsp&nbsp</td>
		<td colspan="4"><center>Stexy</center></button></td>
	</tr>
	<tr>
		<td colspan="1">Abilitato</td>
		<td colspan="1">Giorno</td>
		<td colspan="1">Ora di accensione</td>
		<td colspan="1">Tempo</td>
		<td colspan="1">&nbsp</td>
		<td colspan="1">Abilitato</td>
		<td colspan="1">Giorno</td>
		<td colspan="1">Ora di accensione</td>
		<td colspan="1">Tempo</td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_0_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Lunedi</td>
		<td colspan="1"><input id="po_0_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_0_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_0_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Lunedi</td>
		<td colspan="1"><input id="po_0_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_0_1_duration" type="time" name="usr_time"></td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_1_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Martedi</td>
		<td colspan="1"><input id="po_1_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_1_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_1_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Martedi</td>
		<td colspan="1"><input id="po_1_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_1_1_duration" type="time" name="usr_time"></td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_2_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Mercoledi</td>
		<td colspan="1"><input id="po_2_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_2_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_2_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Mercoledi</td>
		<td colspan="1"><input id="po_2_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_2_1_duration" type="time" name="usr_time"></td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_3_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Giovedi</td>
		<td colspan="1"><input id="po_3_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_3_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_3_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Giovedi</td>
		<td colspan="1"><input id="po_3_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_3_1_duration" type="time" name="usr_time"></td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_4_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Venerdi</td>
		<td colspan="1"><input id="po_4_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_4_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_4_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Venerdi</td>
		<td colspan="1"><input id="po_4_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_4_1_duration" type="time" name="usr_time"></td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_5_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Sabato</td>
		<td colspan="1"><input id="po_5_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_5_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_5_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Sabato</td>
		<td colspan="1"><input id="po_5_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_5_1_duration" type="time" name="usr_time"></td>
	</tr>
	<tr>
		<td colspan="1"><input id="po_6_0_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Domenica</td>
		<td colspan="1"><input id="po_6_0_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_6_0_duration" type="time" name="usr_time"></td>
		<td colspan="1">&nbsp</td>
		<td colspan="1"><input id="po_6_1_auto" type="checkbox" name="vehicle1" value="Bike"></td>
		<td colspan="1">Domenica</td>
		<td colspan="1"><input id="po_6_1_start" type="time" name="usr_time"></td>
		<td colspan="1"><input id="po_6_1_duration" type="time" name="usr_time"></td>
	</tr>
</table>
<br>
<br>
<center><button id="cmd_enable" type="button" onclick="cmdTimerOff(0,10)"style="font-size: 2em; ">Salva</button></center>


</CENTER>
<br><br>
<center>
<div style="width:75%;">
	<canvas id="canvas"></canvas>
</div>
</center>
</BODY>
</HTML>

<script>
var websock;
var myChart;
//var auto_refresh = setInterval( function () { loadXMLDoc(); }, 1000);
//function resetRefreshPeriod () {
//clearInterval (auto_refresh);
//auto_refresh = setInterval( function () { loadXMLDoc(); }, 2500);
//}

function cmdSpegni(station) {
	iobj="<object type=\"text/html\" data=off?st="+station+" ></object>";
	document.getElementById("cmd_bulk_raw").innerHTML=iobj;
}

function cmdAccendi(station) {
	iobj="<object type=\"text/html\" data=on?st="+station+" ></object>";
	document.getElementById("cmd_bulk_raw").innerHTML=iobj;
}

function cmdTimerOff(station, countdown) {
	iobj="<object type=\"text/html\" data=set_timer_off?st="+station+"&countdown="+countdown+" ></object>";
	document.getElementById("cmd_bulk_raw").innerHTML=iobj;
}

function loadXMLDoc() {
        var xmlhttp;

        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
        } else {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                        var a = xmlhttp.responseText;
                        var b = JSON.parse(a);
                        var data = b.programmazione_settimanale;

			document.getElementById("po_0_0_auto").checked = true;
			document.getElementById("po_0_0_start").value = "22:00";
			
                        for (day=0; day<7; day++) {
				for (st=0; st<2; st++) {
					if (data[day].day_prog[st].auto) document.getElementById("po_"+day+"_"+st+"_auto").checked = true; 
					else document.getElementById("po_0_0_auto").checked = false;
					document.getElementById("po_"+day+"_"+st+"_start").value = data[day].day_prog[st].start;
					document.getElementById("po_"+day+"_"+st+"_duration").value = data[day].day_prog[st].duration;
				}
			}
/*

                                if (data[ce].acceso) {
                                        if (data[ce].timer_off) {
                                                diff = data[ce].durata_timer - data[ce].timer_run;
                                                minuti_tot=Math.floor(diff/60);
                                                secondi_tot=diff - (minuti_tot*60);
                                                document.getElementById("on_off_"+ce).innerHTML = "<center>Timer "+minuti_tot+":"+secondi_tot+"</center>";
                                                document.getElementById("on_off_"+ce).style.backgroundColor = '#00ff00';
                                        } else {
                                                document.getElementById("on_off_"+ce).innerHTML = "<center>Acceso</center>";
                                                document.getElementById("on_off_"+ce).style.backgroundColor = '#00ff00';
                                        }
                                } else {
                                        document.getElementById("on_off_"+ce).innerHTML = "<center>Spento</center>";
                                        document.getElementById("on_off_"+ce).style.backgroundColor = '#005500';
                                }
                        }

                        if (data[0].acceso == "true") document.getElementById("on_off_1").innerHTML.bgcolor = "#00ff00";
                        else document.getElementById("on_off_1").innerHTML.bgcolor = "#005500";
*/
                }
          }
        xmlhttp.open("GET","week_prog.json",true);
        xmlhttp.send();

//      auto_refresh = setInterval( function () { loadXMLDoc(); }, 1000);
}

loadXMLDoc();

</script>
